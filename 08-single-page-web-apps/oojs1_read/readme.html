<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>R / CRUD | Welcome to GA&#39;s WDI-DC</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.4">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="../../gitbook/style.css">
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="../../gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    

        
    
    
    <link rel="next" href="../../08-single-page-web-apps/oojs2_create_update_destroy/readme.html" />
    
    
    <link rel="prev" href="../../07-apis-express-ajax/prototypes_and_constructors/readme.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="7.2"
        data-chapter-title="R / CRUD"
        data-filepath="08-single-page-web-apps/oojs1_read/readme.md"
        data-basepath="../.."
        data-revision="Mon Dec 07 2015 14:51:59 GMT+0000 (UTC)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="../../index.html">
                
                        <i class="fa fa-check"></i>
                        
                        An Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="01-front-end-fundamentals/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Front End Fundamentals
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.1" data-path="01-front-end-fundamentals/command-line/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/command-line/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.1.</b>
                        
                        Command Line Interface
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="01-front-end-fundamentals/git/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/git/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.2.</b>
                        
                        Git
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="01-front-end-fundamentals/intro-to-web-and-html/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/intro-to-web-and-html/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.3.</b>
                        
                        Intro to Web and HTML
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="01-front-end-fundamentals/css/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/css/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.4.</b>
                        
                        CSS
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="01-front-end-fundamentals/javascript-data-types/readme.html">
            
            <span><b>1.5.</b> JavaScript Data Types</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="01-front-end-fundamentals/javascript-loops-conditionals/readme.html">
            
            <span><b>1.6.</b> JavaScript Loops and Conditionals</span>
            
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="01-front-end-fundamentals/javascript-objects-functions/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-objects-functions/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.7.</b>
                        
                        JavaScript Objects and Functions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="01-front-end-fundamentals/javascript-DOM/readme.html">
            
                
                    <a href="../../01-front-end-fundamentals/javascript-DOM/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.8.</b>
                        
                        JavaScript DOM
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2" data-path="02-intermediate-front-end/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Intermediate Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="02-intermediate-front-end/scope-context-closures/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Scope, Context, and Closures
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="02-intermediate-front-end/scope-context-closures/scope.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/scope.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Scope
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.2" data-path="02-intermediate-front-end/scope-context-closures/context.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/context.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.2.</b>
                        
                        Context
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.1.3" data-path="02-intermediate-front-end/scope-context-closures/closures.html">
            
                
                    <a href="../../02-intermediate-front-end/scope-context-closures/closures.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.3.</b>
                        
                        Closures
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="02-intermediate-front-end/events-and-callbacks/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/events-and-callbacks/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Events and Callbacks
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="02-intermediate-front-end/git_branching/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/git_branching/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Git Branching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="02-intermediate-front-end/jquery/jquery-intro-selectors.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-intro-selectors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        jQuery
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="02-intermediate-front-end/jquery/jquery-two.html">
            
                
                    <a href="../../02-intermediate-front-end/jquery/jquery-two.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        jQuery 2
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="02-intermediate-front-end/workflows/lesson_plan.html">
            
            <span><b>2.6.</b> Workflows</span>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="02-intermediate-front-end/css2/readme.html">
            
                
                    <a href="../../02-intermediate-front-end/css2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        CSS 2 (Layout &amp; Fonts)
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="04-ruby-mvc-sinatra/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Ruby + MVC with Sinatra
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="04-ruby-mvc-sinatra/ruby-basics/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-basics/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Ruby Basics
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/ruby-enumerables/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Ruby Enumerables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="04-ruby-mvc-sinatra/problem_modeling/readme.html">
            
            <span><b>3.3.</b> Problem Modeling</span>
            
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="04-ruby-mvc-sinatra/domain_modeling/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/domain_modeling/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.4.</b>
                        
                        Domain Modeling
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="04-ruby-mvc-sinatra/databases/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/databases/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.5.</b>
                        
                        Databases
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="04-ruby-mvc-sinatra/active-record-intro/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/active-record-intro/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.6.</b>
                        
                        Active Record
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.7" data-path="04-ruby-mvc-sinatra/sinatra-rest/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-rest/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.7.</b>
                        
                        Sinatra &amp; REST
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.8" data-path="04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
            
                
                    <a href="../../04-ruby-mvc-sinatra/sinatra-and-activerecord/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.8.</b>
                        
                        Sinatra &amp; Active Record
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="05-mvc-with-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        MVC with Rails
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="05-mvc-with-rails/unit_testing_with_rspec/readme.html">
            
            <span><b>4.1.</b> Unit Testing with RSpec</span>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="05-mvc-with-rails/MVC-intro-to-rails/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/MVC-intro-to-rails/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                        MVC Intro to Rails
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.3" data-path="05-mvc-with-rails/rails-models-and-migrations/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-models-and-migrations/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                        Models and Migrations
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.4" data-path="05-mvc-with-rails/rails-views-and-controllers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-views-and-controllers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                        Views and Controllers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.5" data-path="05-mvc-with-rails/rails-routes-and-resources/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-routes-and-resources/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.5.</b>
                        
                        Routes and Resources
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.6" data-path="05-mvc-with-rails/rails-helpers/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-helpers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.6.</b>
                        
                        Helpers
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.7" data-path="05-mvc-with-rails/rails-sessions-and-auth/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-sessions-and-auth/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.7.</b>
                        
                        Sessions and Auth
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.8" data-path="05-mvc-with-rails/rails-deployment/readme.html">
            
                
                    <a href="../../05-mvc-with-rails/rails-deployment/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.8.</b>
                        
                        Deployment
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="07-uxdi-collaboration/readme.html">
            
            <span><b>5.</b> UXDI Collaboration: The Interactive Web</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="07-uxdi-collaboration/apis/readme.html">
            
            <span><b>5.1.</b> APIs</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="07-uxdi-collaboration/ajax/readme.html">
            
            <span><b>5.2.</b> Ajax</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="07-uxdi-collaboration/grids/readme.html">
            
            <span><b>5.3.</b> Grid Systems</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="07-uxdi-collaboration/animations/readme.html">
            
            <span><b>5.4.</b> Animations</span>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="07-uxdi-collaboration/responsive-web-design/readme.html">
            
            <span><b>5.5.</b> Responsive Web Design</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="08-single-page-web-apps/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        &quot;Single Page&quot; Web Applications
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="08-single-page-web-apps/express_intro/readme.html">
            
            <span><b>6.1.</b> Intro to Express</span>
            
            
        </li>
    
        <li class="chapter " data-level="6.2" data-path="08-single-page-web-apps/express_routing/readme.html">
            
            <span><b>6.2.</b> Express Routing</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" >
            
            <span><b>7.</b> Object-Oriented Javascript</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="07-apis-express-ajax/prototypes_and_constructors/readme.html">
            
                
                    <a href="../../07-apis-express-ajax/prototypes_and_constructors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Prototypes and Constructors
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="7.2" data-path="08-single-page-web-apps/oojs1_read/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/oojs1_read/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                        R / CRUD
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7.3" data-path="08-single-page-web-apps/oojs2_create_update_destroy/readme.html">
            
                
                    <a href="../../08-single-page-web-apps/oojs2_create_update_destroy/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                        CUD / CRUD
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="10-back-and-front-of-front-end/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Back and Front of Front End
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" >
            
            <span><b>8.1.</b> BackBone</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1.1" data-path="10-back-and-front-of-front-end/bb_models_collections/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/bb_models_collections/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.1.</b>
                        
                        Models and Collections
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.2" data-path="10-back-and-front-of-front-end/bb_views_part1/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/bb_views_part1/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.2.</b>
                        
                        Views (part 1)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.3" data-path="10-back-and-front-of-front-end/bb_views_part2/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/bb_views_part2/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.3.</b>
                        
                        Views (part 2)
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.1.4" data-path="10-back-and-front-of-front-end/bb_routers/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/bb_routers/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.4.</b>
                        
                        Routers
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8.2" >
            
            <span><b>8.2.</b> Front End</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.2.1" data-path="10-back-and-front-of-front-end/bootstrap/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/bootstrap/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.1.</b>
                        
                        Bootstrap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.2" data-path="10-back-and-front-of-front-end/flexbox/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/flexbox/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.2.</b>
                        
                        Flex Box
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.3" data-path="10-back-and-front-of-front-end/foundation/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/foundation/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.3.</b>
                        
                        Foundation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.4" data-path="10-back-and-front-of-front-end/intro-to-php/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/intro-to-php/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.4.</b>
                        
                        Intro to PHP
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.5" data-path="10-back-and-front-of-front-end/jquery-plugins/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/jquery-plugins/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.5.</b>
                        
                        jQuery Plugins
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.6" data-path="10-back-and-front-of-front-end/mapping/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/mapping/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.6.</b>
                        
                        Mapping
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.7" data-path="10-back-and-front-of-front-end/pseudo-selectors/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/pseudo-selectors/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.7.</b>
                        
                        Pseudo Selectors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.8" data-path="10-back-and-front-of-front-end/sass1-basic-reuse/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/sass1-basic-reuse/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.8.</b>
                        
                        Sass 1: Basic Reuse
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2.9" data-path="10-back-and-front-of-front-end/sass2-control-directives/readme.html">
            
                
                    <a href="../../10-back-and-front-of-front-end/sass2-control-directives/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.9.</b>
                        
                        Sass 2: Control Directives
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="11-angular/readme.html">
            
                
                    <a href="../../11-angular/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        MVW with Angular
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="11-angular/angular_intro_controllers_directives/readme.html">
            
                
                    <a href="../../11-angular/angular_intro_controllers_directives/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Angular Intro: Controllers &amp; Directives
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="11-angular/services_templates_and_routing/readme.html">
            
                
                    <a href="../../11-angular/services_templates_and_routing/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Services, Templates, and Routing
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="11-angular/custom_directives/readme.html">
            
                
                    <a href="../../11-angular/custom_directives/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        Custom Directives
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="11-angular/firebase_in_angular/readme.html">
            
                
                    <a href="../../11-angular/firebase_in_angular/readme.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        AngularFire: Firebase &amp; Angular
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.5" data-path="11-angular/angular-vs-rails.html">
            
                
                    <a href="../../11-angular/angular-vs-rails.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.5.</b>
                        
                        Angular vs. Rails
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../../" >Welcome to GA&#39;s WDI-DC</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="oojs--reading">OOJS - Reading</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<ul>
<li>Use <code>$.ajax</code> to populate objects client-side.</li>
<li>Differentiate between &quot;class methods&quot; and &quot;instance (prototyped) methods&quot; in JS.</li>
<li>Use OOJS to build model and view objects.</li>
<li>Utilize promises to access the response from an <code>$.ajax</code> request.</li>
<li>Render views client-side utilizing JS objects.</li>
</ul>
<h2 id="opening-framing-1010">Opening Framing (10/10)</h2>
<p>We&apos;ve learned how to make web applications with RESTful routing. We&apos;ve even learned how to create them as API&apos;s that respond with JSON. Additionally, we&apos;ve also learned how to make requests to an API in order to access data. But really all we did with that data was maybe create a single div in the promise of the AJAX request. This isn&apos;t really ideal.</p>
<p>Instead, it would be great if we could take that AJAX response and encapsulate the information we want into client-side JS objects. Then, with those model objects, we can render views utilizing view objects. In the same way we used Rails to group functionality and separate concerns, we can do similar things with JS objects on the client-side.  </p>
<p><strong>HEADS UP:</strong> This stuff is hard guys. OOJS is one of more difficult thing we teach in this class. That being said, it&apos;s OK to not fully understand right away. Pick up what you can, practice and break stuff.  </p>
<blockquote>
<p>NOTE: We teach you many many tools. You won&apos;t use every tool all the time, but start to identify good use cases for these tools. If you were building a hole in the ground a foot deep, a back hoe might be a bit much and a shovel might do the trick. That said OOJS is not the end all be all of doing things on the front end.</p>
</blockquote>
<h2 id="goal">Goal</h2>
<p>The goal here is to build this <a href="https://github.com/ga-dc/tunr_mongo_oojs" target="_blank">app</a>.
We want to be able to create these views strictly on the client-side.  </p>
<h2 id="setup-1020">Setup (10/20)</h2>
<p>The first thing we should do is fork/clone the <a href="https://github.com/ga-dc/tunr_mongo_oojs" target="_blank">Tunr repo</a>. Then, let&apos;s install dependencies and start the server.  </p>
<pre><code class="lang-bash">$ npm install
$ node db/seeds.js
$ nodemon app.js
</code></pre>
<p>If we go into our browser we can view all the endpoints and see that we can access all Tunr data as JSON. Take a look at <code>app.js</code>, <code>controllers/artists.js</code> and <code>controllers/artists.js</code> and you can see the different routes.  </p>
<p>Additionally if we look into <code>app.js</code> We can see at the root route we are rendering the index view.</p>
<p><strong>NOTE:</strong> This index view is not the same as the <code>.hbs</code> views we&apos;ve been using in Express. In fact, we won&apos;t be making use of any Express views at all. Instead, we&apos;ll be working from a single <code>index.html</code> file in our <code>public</code> folder.</p>
<p>In the <code>&lt;body&gt;</code> of <code>public/index.html</code>, we have a header as well as <code>&lt;div class=&quot;artists&quot;&gt;&lt;/div&gt;</code>.</p>
<p>In the <code>&lt;head&gt;</code> we&apos;re linking to a stylesheet as well as some script files. We&apos;ll be adding a few more script files in class today.</p>
<h2 id="i-do-models-1030">I Do: Models (10/30)</h2>
<p>The first thing that I want to do is create a model file. This will hold the constructor function for a model. Let&apos;s create a file for the artist model: <code>$ touch public/js/models/artist.js</code></p>
<p>In <code>public/js/models/artist.js</code>:</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Artist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">info</span>)</span>{
  <span class="hljs-keyword">this</span>.name = info.name;
  <span class="hljs-keyword">this</span>.photoUrl = info.photoUrl;
  <span class="hljs-keyword">this</span>.nationality = info.nationality;
  <span class="hljs-keyword">this</span>.id = info.id
}
</code></pre>
<blockquote>
<p>In this constructor function, <code>info</code> is an argument passed in when creating a new Artist object. The properties of this object match to the columns in the <code>artists</code> database table.</p>
</blockquote>
<p>Let&apos;s go ahead and test this out in the console of our browser.  </p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> artist = <span class="hljs-keyword">new</span> Artist()
<span class="hljs-comment">// &gt; Uncaught ReferenceError: Artist is not defined</span>
</code></pre>
<p>What gives? We haven&apos;t included the script file in our layout file. In <code>views/layout.hbs</code>:</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;/js/models/artist.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
</code></pre>
<p>Lets try again.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> artist = <span class="hljs-keyword">new</span> Artist()
<span class="hljs-comment">// &gt; Uncaught TypeError: Cannot read property &apos;name&apos; of undefined</span>
</code></pre>
<p>I think the issue here is that we didn&apos;t pass in an argument to the constructor function. Ok, third time&apos;s a charm.  </p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> artist = <span class="hljs-keyword">new</span> Artist({
  name: <span class="hljs-string">&quot;Blues Traveler&quot;</span>,
  photoUrl: <span class="hljs-string">&quot;http://coloredvinylrecords.com/pictures/b/blues-traveler-four-01433512670.png&quot;</span>,
  nationality: <span class="hljs-string">&quot;murica&quot;</span>,
  id: <span class="hljs-number">6</span>
})
<span class="hljs-comment">// &gt; undefined</span>
artist
<span class="hljs-comment">// &gt; Artist {name: &quot;blues traveler&quot;, photoUrl: &quot;someURL&quot;, nationality: &quot;murica&quot;, id: 6}</span>
</code></pre>
<p>Great - we created a client-side instance of our object!  </p>
<h2 id="you-do-models-1040">You Do: Models (10/40)</h2>
<p>Now that we&apos;ve created the artist model, go ahead and code the Song model definition.</p>
<p>Remember to:</p>
<ul>
<li>Create a model file.</li>
<li>Code the constructor function in that file.</li>
<li>Link to that file to your layout.</li>
</ul>
<h2 id="fetching-2060">Fetching (20/60)</h2>
<p>It&apos;s not enough to just be able to create an object on the client side. We have to be able to make an ajax call to a server to actually parse the database into objects on the client side. Let&apos;s update our artist model to fetch from a database. In <code>js/models/artist.js</code>...</p>
<pre><code class="lang-js">Artist.fetch = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-comment">// saving the ajax request to a local variable</span>
  <span class="hljs-keyword">var</span> request = $.getJSON(<span class="hljs-string">&quot;http://localhost:3000/artists&quot;</span>)
  <span class="hljs-comment">// the promise function on a successful ajax call.</span>
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>) </span>{
    <span class="hljs-comment">// local variable in the promise callback instantiated as an empty array</span>
    <span class="hljs-keyword">var</span> artists = []
    <span class="hljs-comment">// loop over each element in the response</span>
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; response.length; i++){
      <span class="hljs-comment">// create a new JS Artist object for each element in the response</span>
      artists.push(<span class="hljs-keyword">new</span> Artist(response[i]))
    }
    <span class="hljs-comment">// returns artists in the promise so that it can be passed in as an argument to future promises</span>
    <span class="hljs-keyword">return</span> artists
    })
  .fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
      <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;artists fetch fail&quot;</span>)
    })
  <span class="hljs-comment">// explicit return of the fetch function that returns the json request with artists available an argument for future promises  </span>
  <span class="hljs-keyword">return</span> request
}
</code></pre>
<blockquote>
<p><a href="http://api.jquery.com/jquery.getjson/" target="_blank"><code>$.getJSON</code></a> is jQuery method that serves the same purpose as a GET <code>$.ajax</code> to a JSON source.  </p>
<p>NOTE: We defined the <code>fetch</code> function inside the Artist constructor. This is more or less the same as class methods in Ruby.</p>
</blockquote>
<p>There&apos;s a lot going on here. Let&apos;s take it slow and play around with it in the console.  </p>
<pre><code class="lang-js">artists = Artist.fetch()
<span class="hljs-comment">// &gt; Object{}</span>
</code></pre>
<blockquote>
<p>We can drill into the response object and see some pretty cryptic stuff. But if you remember in the code comments above, that&apos;s possible because we return the response. By saving the response to an <code>artists</code> variable, we have access to artists as an argument in future promises.</p>
</blockquote>
<p>Let try attaching a promise to it.</p>
<pre><code class="lang-js">artists.then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artists</span>)</span>{
  <span class="hljs-built_in">console</span>.log(artists)
})
<span class="hljs-comment">// &gt; [Artist, Artist, Artist, Artist, Artist]</span>
</code></pre>
<p>We now have access to our artists in our database on the  client side.</p>
<h2 id="break-1070">Break (10/70)</h2>
<h2 id="views-artist-2090">Views: Artist (20/90)</h2>
<p>We have the ability to create objects in JS from the database on the client side. We need to additionally render views based on those models. There&apos;s lots of ways to build views as well as lots of front-end frameworks that do it as well. This is just one way.  </p>
<p>Lets start by creating and editing <code>public/js/views/artistView.js</code>.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> ArtistView = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artist</span>)</span>{
  <span class="hljs-keyword">this</span>.artist = artist;
  <span class="hljs-keyword">this</span>.$el = $(<span class="hljs-string">&quot;&lt;div class=&apos;artist&apos;&gt;&lt;/div&gt;&quot;</span>);
};
</code></pre>
<blockquote>
<p><code>$el</code> is an HTML representation of what our view will look like when rendered on our webpage. The <code>$</code> means it&apos;s a jQuery object, so we can call jQuery methods on it.</p>
</blockquote>
<p>We can quickly test this in the console by creating a new artistView.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> bluesTraveler = <span class="hljs-keyword">new</span> Artist({
  name: <span class="hljs-string">&quot;Blues Traveler&quot;</span>,
  photoUrl: <span class="hljs-string">&quot;http://coloredvinylrecords.com/pictures/b/blues-traveler-four-01433512670.png&quot;</span>,
  nationality: <span class="hljs-string">&quot;murica&quot;</span>,
  id: <span class="hljs-number">6</span>
})
<span class="hljs-keyword">var</span> bluesTravelerView = <span class="hljs-keyword">new</span> ArtistView(bluesTraveler)
</code></pre>
<p>We can call <code>.artist</code> or <code>.$el</code> and retrieve those properties now.</p>
<p>We&apos;re setting 2 properties in the ArtistView objects. The first is an artist, which gets passed into the constructor function. The second is an <code>.$el</code> property which is just a jQuery object that&apos;s an empty div.  </p>
<p>Let&apos;s create some additional functionality for the ArtistView Object in <code>public/js/views/artistView.js</code>.  </p>
<pre><code class="lang-js">ArtistView.prototype = {
  render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-comment">// we&apos;ll be adding event listeners later but will still need access to the Artist view in the event listener</span>
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-comment">// appending elements to the .$el property</span>
    self.$el.append(<span class="hljs-string">&quot;&lt;h3&gt;&quot;</span> + self.artist.name + <span class="hljs-string">&quot;&lt;/h3&gt;&quot;</span>);
    self.$el.append(<span class="hljs-string">&quot;&lt;img class=&apos;artist-photo&apos; src=&apos;&quot;</span> + self.artist.photoUrl + <span class="hljs-string">&quot;&apos;&gt;&quot;</span>);
    self.$el.append(<span class="hljs-string">&quot;&lt;button class=&apos;showSongs&apos;&gt;Show Songs&lt;/button&gt;&quot;</span>);
    self.$el.append(<span class="hljs-string">&quot;&lt;div class=&apos;songs&apos;&gt;&lt;/div&gt;&quot;</span>);
    <span class="hljs-comment">// append the .$el to the div with class artists in our view.</span>
    $(<span class="hljs-string">&quot;div.artists&quot;</span>).append(self.$el);
  }
}
</code></pre>
<blockquote>
<p>NOTE: We namespaced the .render() functionality under prototype. That is to say, this is like an instance method. It is available to each instance of the ArtistView Object</p>
</blockquote>
<p>Let&apos;s test this out in the console.  </p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> bluesTraveler = <span class="hljs-keyword">new</span> Artist({
  name: <span class="hljs-string">&quot;Blues Traveler&quot;</span>,
  photoUrl: <span class="hljs-string">&quot;http://coloredvinylrecords.com/pictures/b/blues-traveler-four-01433512670.png&quot;</span>,
  nationality: <span class="hljs-string">&quot;USA&quot;</span>,
  id: <span class="hljs-number">6</span>
});
<span class="hljs-keyword">var</span> bluesTravelerView = <span class="hljs-keyword">new</span> ArtistView(bluesTraveler);
bluesTravelerView.render();
</code></pre>
<p>Great, we see the view was generated and rendered to our page! Now let&apos;s do some refactoring in <code>public/js/views/artistView.js</code>.</p>
<pre><code class="lang-js">ArtistView.prototype ={
  render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    self.$el.html(self.artistTemplate(self.artist));
    $(<span class="hljs-string">&quot;.artists&quot;</span>).append(self.$el);
  },
  artistTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artist</span>)</span>{
    <span class="hljs-keyword">var</span> html = $(<span class="hljs-string">&quot;&lt;div&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;h3&gt;&quot;</span> + <span class="hljs-keyword">this</span>.artist.name + <span class="hljs-string">&quot;&lt;/h3&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;img class=&apos;artist-photo&apos; src=&apos;&quot;</span> + <span class="hljs-keyword">this</span>.artist.photoUrl + <span class="hljs-string">&quot;&apos;&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;button class=&apos;showSongs&apos;&gt;Show Songs&lt;/button&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;div class=&apos;songs&apos;&gt;&lt;/div&gt;&quot;</span>);
    <span class="hljs-keyword">return</span>(html);
  }
}
</code></pre>
<blockquote>
<p>We&apos;ll get into templating later. When we implement this (probably with Handlebars) we will no longer need this <code>artistTemplate</code> function.</p>
</blockquote>
<p>We want all artists to be rendered upon page load. Let&apos;s take care of that in <code>public/js/script.js</code>:</p>
<pre><code class="lang-js">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  Artist.fetch().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artists</span>)</span>{
    artists.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artist</span>)</span>{
      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> ArtistView(artist)
      view.render();
    })
  })
});
</code></pre>
<p>Let&apos;s reload the page. BAM!</p>
<blockquote>
<p>NOTE: Code snippets moving forward will be parts of an entire file.</p>
</blockquote>
<h2 id="i-do-fetching-songs-20110-w-break">I Do: Fetching Songs (20/110) w/ break</h2>
<p>As we can see on our new landing page, there&apos;s a show songs button for each Artist. We want to be able to click on that button and see all of the songs that belong to that Artist.  </p>
<p>In the render function of our artists, we additionally want to add an event listener to this button. In the render function of <code>public/js/views/artistView.js</code>...</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> showButton = self.$el.find(<span class="hljs-string">&quot;.showSongs&quot;</span>);
<span class="hljs-keyword">var</span> songsDiv = self.$el.find(<span class="hljs-string">&quot;div.songs&quot;</span>);
songsDiv.hide();
showButton.on(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;show button clicked&quot;</span>);
});
</code></pre>
<p>The event is firing off. We also hid the <code>div</code> with class <code>songs</code> because we want to be able to call <code>.show</code> on it for the initial click.  </p>
<p>It&apos;s not enough to just log that the button was clicked though. Really what we want to do is append a Song for each Song associated with this Artist.  </p>
<p>The first thing we need is the ability to get our Songs. Let&apos;s update our Artist model to incorporate that functionality. In <code>public/js/models/artist.js</code>...  </p>
<pre><code class="lang-js">Artist.prototype.fetchSongs = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> url = <span class="hljs-string">&quot;http://localhost:3000/artists/&quot;</span> + <span class="hljs-keyword">this</span>.id + <span class="hljs-string">&quot;/songs&quot;</span>;
  <span class="hljs-keyword">var</span> request = $.getJSON(url)
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
    <span class="hljs-keyword">var</span> songs = [];
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; response.length; i++){
      songs.push(<span class="hljs-keyword">new</span> Song(response[i]));
    }
    <span class="hljs-keyword">return</span> songs;
  })
  .fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">repsonse</span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;js failed to load&quot;</span>);
  })
  <span class="hljs-keyword">return</span> request;
}
</code></pre>
<blockquote>
<p>NOTE: While they look pretty similar, there are some important different between <code>.fetch()</code> and <code>.fetchSongs()</code>. <code>.fetch()</code> is a class method which is called on the constructor function to get all of the Artists. <code>.fetchSongs</code> is an instance method and is available for each instance of the Artist constructor and grabs all of the Songs for that single Artist.</p>
</blockquote>
<p>So we&apos;re able to get the Songs for each Artist. Now, we want the ability to generate a view for each Song so we can append it to the Artist.  </p>
<h2 id="you-do-create-and-edit-publicjsviewsongviewjs-10120">You Do: Create and Edit <code>/public/js/view/songView.js</code> (10/120)</h2>
<p>The song view is kept minimal because we are just attaching it to the artist view. All we want to return in the render function is a <code>&lt;p&gt;</code> containing the title.  </p>
<h2 id="i-do-show-songs-click-event-20140">I Do: Show Songs Click Event (20/140)</h2>
<p>Alright, let&apos;s update event listener in our render function inside of <code>public/js/views/artistView.js</code>.</p>
<pre><code class="lang-js">showButton.on(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">if</span>(songsDiv.children().length === <span class="hljs-number">0</span>){
    self.artist.fetchSongs().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songs</span>)</span>{
      songs.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">song</span>)</span>{
        <span class="hljs-keyword">var</span> songView = <span class="hljs-keyword">new</span> SongView(song);
        songsDiv.append(songView.render());
        songsDiv.show();
      });
    });
  }
  <span class="hljs-comment">// toggle (note: songsDiv starts hidden)</span>
  songsDiv.toggle();
})
</code></pre>
<p>Awesome! We can now click Show Songs (and it even toggles). Seems a little bit off that the button still shows show songs after we click it, but we can fix that in a bit.  </p>
<p>Our code is starting to get a little bit out of control. Let&apos;s take some time to refactor. We want to get as much out of this render function as possible and separate our concerns. Let&apos;s first abstract out all of the functionality inside of the click event and namespace it into <code>toggleSongs</code>. In the <code>ArtistView.prototype</code> object inside of <code>public/js/views/artistView.js</code>...</p>
<pre><code class="lang-js">render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
  self.$el.html(self.artistTemplate(self.artist));
  $(<span class="hljs-string">&quot;.artists&quot;</span>).append(self.$el);
  <span class="hljs-keyword">var</span> showButton = self.$el.find(<span class="hljs-string">&quot;.showSongs&quot;</span>);
  <span class="hljs-keyword">var</span> songsDiv = self.$el.find(<span class="hljs-string">&quot;div.songs&quot;</span>);
  showButton.on(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    self.toggleSongs(songsDiv);
  })
},

toggleSongs: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songsDiv</span>)</span>{
  <span class="hljs-keyword">if</span>(songsDiv.children().length === <span class="hljs-number">0</span>){
    <span class="hljs-keyword">this</span>.artist.fetchSongs().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songs</span>)</span>{
      songs.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">song</span>)</span>{
        <span class="hljs-keyword">var</span> songView = <span class="hljs-keyword">new</span> SongView(song);
        songsDiv.append(songView.render());
        songsDiv.show();
      });
    });
  }
  songsDiv.toggle();
}
</code></pre>
<p>Even though the method is <code>toggleSongs</code>, it&apos;s additionally appending views if it hasn&apos;t fetched yet. I think we should go ahead and abstract this out as well in order to separate our concerns. In the <code>ArtistView.prototype</code> object inside of <code>public/js/views/artistView.js</code>...</p>
<pre><code class="lang-js">render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
  self.$el.html(self.artistTemplate(self.artist));
  $(<span class="hljs-string">&quot;.artists&quot;</span>).append(self.$el);
  <span class="hljs-keyword">var</span> showButton = self.$el.find(<span class="hljs-string">&quot;.showSongs&quot;</span>);
  <span class="hljs-keyword">var</span> songsDiv = self.$el.find(<span class="hljs-string">&quot;div.songs&quot;</span>);
  showButton.on(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    self.toggleSongs(songsDiv);
  })
},

toggleSongs: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songsDiv</span>)</span>{
  <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
  <span class="hljs-keyword">if</span>(songsDiv.children().length === <span class="hljs-number">0</span>){
    <span class="hljs-keyword">this</span>.artist.fetchSongs().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songs</span>)</span>{
      self.appendSongs(songs, songsDiv);
      songsDiv.show();
    });
  }
  songsDiv.toggle();
},

appendSongs: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songs, songsDiv</span>)</span>{
  songs.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">song</span>)</span>{
    <span class="hljs-keyword">var</span> songView = <span class="hljs-keyword">new</span> SongView(song);
    songsDiv.append(songView.render());
  });
}
</code></pre>
<blockquote>
<p>It&apos;s a little bit more code upfront, but you increase your code maintainability, scalability and modularity.</p>
</blockquote>
<p>One last little detail we need to fix on the UI. The buttons text should change from &quot;Show Songs&quot; to &quot;Hide Songs&quot; depending on the state of the application.  </p>
<h2 id="you-do-toggle-the-button-10150">You Do: Toggle the Button (10/150)</h2>
<p>Create an instance method inside the <code>ArtistView.prototype</code> object. This method should make it such that the buttons text changes dynamically depending on whether songs are showing or not.</p>
<h2 id="closing--questions">Closing / Questions</h2>
<h1 id="cliff-notes">Cliff Notes</h1>
<p>The solution for the <code>read</code> portion of today&apos;s in-class example is available <a href="https://github.com/ga-dc/tunr_mongo_oojs/tree/read" target="_blank">here</a>.</p>
<h3 id="publicindexhtml">/public/index.html</h3>
<pre><code class="lang-js">&lt;!DOCTYPE html&gt;
<span class="xml"><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">title</span>&gt;</span>Tun.r<span class="hljs-tag">&lt;/<span class="hljs-title">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">&quot;stylesheet&quot;</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">&quot;style.css&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;js/models/artist.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;js/models/song.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;js/views/artistView.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;js/views/songView.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">&quot;js/script.js&quot;</span>&gt;</span><span class="undefined"></span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">header</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-title">h1</span>&gt;</span>Tun.r<span class="hljs-tag">&lt;/<span class="hljs-title">h1</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">header</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">&quot;artists&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span>
</span></code></pre>
<h3 id="publicjsmodelsartistjs">/public/js/models/artist.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Artist = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">info</span>)</span>{
  <span class="hljs-keyword">this</span>.name = info.name;
  <span class="hljs-keyword">this</span>.photoUrl = info.photoUrl;
  <span class="hljs-keyword">this</span>.nationality = info.nationality;
  <span class="hljs-keyword">this</span>.id = info.id
}

Artist.fetch = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> request = $.getJSON(<span class="hljs-string">&quot;http://localhost:3000/artists&quot;</span>).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
    <span class="hljs-keyword">var</span> artists = [];
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; response.length; i++){
      artists.push(<span class="hljs-keyword">new</span> Artist(response[i]));
    }
    <span class="hljs-keyword">return</span> artists;
  }).fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;artists fetch fail&quot;</span>);
  });
  <span class="hljs-keyword">return</span> request;
}

Artist.prototype.fetchSongs = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  <span class="hljs-keyword">var</span> url = <span class="hljs-string">&quot;http://localhost:3000/artists/&quot;</span> + <span class="hljs-keyword">this</span>.id + <span class="hljs-string">&quot;/songs&quot;</span>;
  <span class="hljs-keyword">var</span> request = $.getJSON(url);
  .then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">response</span>)</span>{
    <span class="hljs-keyword">var</span> songs = [];
    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; response.length; i++){
      songs.push(<span class="hljs-keyword">new</span> Song(response[i]));
    }
    <span class="hljs-keyword">return</span> songs;
  })
  .fail(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">repsonse</span>)</span>{
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&quot;js failed to load&quot;</span>);
  });
  <span class="hljs-keyword">return</span> request;
}
</code></pre>
<h3 id="publicjsviewsartistviewjs">/public/js/views/artistView.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> ArtistView = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artist</span>)</span>{
  <span class="hljs-keyword">this</span>.artist = artist;
  <span class="hljs-keyword">this</span>.$el = $(<span class="hljs-string">&quot;&lt;div class=&apos;artist&apos;&gt;&lt;/div&gt;&quot;</span>);
}

ArtistView.prototype = {
  render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    self.$el.html(self.artistTemplate(self.artist));
    $(<span class="hljs-string">&quot;.artists&quot;</span>).append(self.$el);
    <span class="hljs-keyword">var</span> showButton = self.$el.find(<span class="hljs-string">&quot;.showSongs&quot;</span>);
    <span class="hljs-keyword">var</span> songsDiv = self.$el.find(<span class="hljs-string">&quot;div.songs&quot;</span>);
    showButton.on(<span class="hljs-string">&quot;click&quot;</span>, <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
      self.toggleSongs(songsDiv);
    })
  },
  toggleSongs: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songsDiv</span>)</span>{
    <span class="hljs-keyword">var</span> self = <span class="hljs-keyword">this</span>;
    <span class="hljs-keyword">if</span>(songsDiv.children().length === <span class="hljs-number">0</span>){
      <span class="hljs-keyword">this</span>.artist.fetchSongs().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songs</span>)</span>{
        self.appendSongs(songs, songsDiv);
        songsDiv.show();
      });
    }
    songsDiv.toggle();
  },
  appendSongs: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">songs, songsDiv</span>)</span>{
    songs.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">song</span>)</span>{
      <span class="hljs-keyword">var</span> songView = <span class="hljs-keyword">new</span> SongView(song);
      songsDiv.append(songView.render());
    });
  },
  artistTemplate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artist</span>)</span>{
    <span class="hljs-keyword">var</span> html = $(<span class="hljs-string">&quot;&lt;div&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;h3&gt;&quot;</span> + artist.name + <span class="hljs-string">&quot;&lt;/h3&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;img class=&apos;artist-photo&apos; src=&apos;&quot;</span> + artist.photoUrl + <span class="hljs-string">&quot;&apos;&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;button class=&apos;showSongs&apos;&gt;Show Songs&lt;/button&gt;&quot;</span>);
    html.append(<span class="hljs-string">&quot;&lt;div class=&apos;songs&apos;&gt;&lt;/div&gt;&quot;</span>);
    <span class="hljs-keyword">return</span>(html);
  }
}
</code></pre>
<h3 id="publicjsmodelssongjs">/public/js/models/song.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> Song = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">info</span>)</span>{
  <span class="hljs-keyword">this</span>.title = info.title;
  <span class="hljs-keyword">this</span>.album = info.album;
  <span class="hljs-keyword">this</span>.previewUrl = info.previewUrl;
  <span class="hljs-keyword">this</span>.artwork = info.artwork;
  <span class="hljs-keyword">this</span>.artistId = info.artistId;
  <span class="hljs-keyword">this</span>.id = info.id
}
</code></pre>
<h3 id="publicjsmodelssongviewjs">/public/js/models/songView.js</h3>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> SongView = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">song</span>)</span>{
  <span class="hljs-keyword">this</span>.song = song;
}

SongView.prototype = {
  render: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> el = $(<span class="hljs-string">&quot;&lt;p&gt;&quot;</span> + <span class="hljs-keyword">this</span>.song.title + <span class="hljs-string">&quot;&lt;/p&gt;&quot;</span>);
    <span class="hljs-keyword">return</span>(el)
  }
}
</code></pre>
<h3 id="publicjsscriptjs">/public/js/script.js</h3>
<pre><code class="lang-js">$(<span class="hljs-built_in">document</span>).ready(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
  Artist.fetch().then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artists</span>)</span>{
    artists.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">artist</span>)</span>{
      <span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> ArtistView(artist)
      view.render();
    })
  })
});
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="../../07-apis-express-ajax/prototypes_and_constructors/readme.html" class="navigation navigation-prev " aria-label="Previous page: Prototypes and Constructors"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="../../08-single-page-web-apps/oojs2_create_update_destroy/readme.html" class="navigation navigation-next " aria-label="Next page: CUD / CRUD"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="../../gitbook/app.js"></script>

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="../../gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
